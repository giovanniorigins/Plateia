<!DOCTYPE html>
<!--<div class="row">
    <form name="subSearch" class="item item-input-inset search-bar am-fade-and-slide-bottom col" search-bar>
        <label class="item-input-wrapper">
            <i class="icon ion-ios7-search placeholder-icon"></i>
            <input type="search" placeholder="Search" ng-model="searchData.search" ng-keyup="search($event)">
            <i class="icon ion-close-circled placeholder-icon" ng-show="searchData.search.length > 0" ng-click="searchData.search = ''" style="font-size:30px;"></i>
        </label>
        <button type="submit" class="button button-clear hide">
            Search
        </button>
    </form>
</div>-->
<ion-nav-buttons side="right">
    <!--<button class="button button-icon icon ion-ios7-glasses" ng-click="viewTypeToggle()"></button>-->
    <button class="button button-icon icon ion-android-sort" ng-click="viewSortToggle()"></button>
</ion-nav-buttons>
<!--<div ng-if="viewType == 'list'">
    <ion-list class="deals-list">

        <span ng-repeat-start="issue in Issues.record | orderBy:'shop_by_shop_id.title'"></span>

        <ion-item class="item-thumbnail-left item-icon-right" ng-repeat-end="" ng-repeat="deal in issue.deals_by_issue_id"
                  bindonce="issue.deals_by_issue_id" ng-click="selectDeal(deal,issue)">
            <img bo-if="deal.deal_images == '' || deal.deal_images === null" bo-src="issue.shop_by_shop_id.shop_image">
            <img bo-if="deal.deal_images.length != 0 && deal.deal_images != null" bo-src="deal.deal_images">

            <h3 bo-text="deal.title"></h3>
            <span style="font-size: .75em" bo-if="deal.deal_images.length != 0 && deal.deal_images != null" bo-html="'at ' + issue.shop_by_shop_id.title +'<br/>'"></span>
            <strong class="balanced" bo-text="deal.new_price|number:2|currency"></strong>
            <span bo-html="', '+deal.size"></span>

            <p ng-pluralize="" count="deal.like_num"
               when="{'0': '', 'one': '1 user added', 'other': '{} users added'}"></p>

            <i class="icon ion-chevron-right icon-accessory"></i>

            <ion-option-button class="button-clear" ng-click='openShare(deal)'><i class="icon ion-share"></i>
            </ion-option-button>
            <ion-option-button class="button-clear" ng-click="toCart(deal)">
                <i ng-if="inCart(deal) == false" class="icon ion-ios7-cart positive"></i>
                <i ng-if="inCart(deal) == true" class="icon ion-checkmark-round balanced"></i>
            </ion-option-button>
        </ion-item>

    </ion-list>
</div>-->

<div>
    <ion-list class="row row-wrap block-list responsive-sm am-fade" ng-if="currentSort === 'deals'">
        <ion-item class="col col-center padding-horizontal padding-top deal-item"
                  ng-class="{'portrait':'col-33', 'landscape':'col-25'}[ADappState.Orientation]"
                  ng-repeat="deal in Deals.record | orderBy: 'shop_by_shop_id.id'"
                  bindonce="Deals">

            <div class="list card">
                <div class="item item-image" ng-click="selectDeal(deal,deal.issues_by_issue_id)">
                    <img bo-if="deal.deal_images.length != 0 && deal.deal_images != null"
                         bo-src="deal.deal_images">
                    <img bo-if="deal.deal_images == '' || deal.deal_images === null"
                         bo-src="deal.shop_by_shop_id.shop_image">

                    <div class="row light-bg" style="position:absolute;bottom:0;background: rgba(255,255,255,.7);">
                        <div class="col dark" style="">
                            <h4 class="dark" bo-html="'<strong>'+ (deal.title) + '</strong>'"></h4>
                            <h2 class="" bo-html="'<strong>'+ (deal.new_price|number:2|currency) + '</strong>, '+ deal.size"></h2>
                        </div>
                    </div>
                </div>

                <div class="item tabs tabs-secondary tabs-icon-left">
                    <a class="tab-item" href="javascript:;">
                        <img class="light-border" bo-src="deal.shop_by_shop_id.shop_image" height="49px">
                    </a>
                    <a class="tab-item" href="javascript:;" ng-click="openShare(deal)">
                        <i class="icon ion-share"></i>
                    </a>
                    <a class="tab-item" href="javascript:;" ng-click="toCart(deal);">
                        <i ng-if="inCart(deal) == false" class="icon ion-ios7-cart"></i>
                        <i ng-if="inCart(deal) == true" class="icon ion-checkmark-round balanced"></i>
                    </a>
                </div>

            </div>

        </ion-item>
    </ion-list>

    <ion-list class="row row-wrap block-list responsive-sm am-fade" ng-if="currentSort === 'shops'">
        <span ng-repeat-start="issue in Issues.record | orderBy:'shop_by_shop_id.title'" bindonce=""></span>

        <ion-item class="col col-center padding-horizontal padding-top deal-item"
                  ng-class="{'portrait':'col-33', 'landscape':'col-25'}[ADappState.Orientation]"
                  ng-repeat="deal in issue.deals_by_issue_id" ng-repeat-end=""
                  bindonce="issue.deals_by_issue_id">

            <div class="list card">
                <div class="item item-image" ng-click="selectDeal(deal,issue)">
                    <img bo-if="deal.deal_images.length != 0 && deal.deal_images != null"
                         bo-src="deal.deal_images">
                    <img bo-if="deal.deal_images == '' || deal.deal_images === null"
                         bo-src="issue.shop_by_shop_id.shop_image">

                    <div class="row light-bg" style="position:absolute;bottom:0;background: rgba(255,255,255,.7);">
                        <div class="col dark" style="">
                            <h4 class="dark" bo-html="'<strong>'+ (deal.title) + '</strong>'"></h4>
                            <h2 class="" bo-html="'<strong>'+ (deal.new_price|number:2|currency) + '</strong>, '+ deal.size"></h2>
                        </div>
                    </div>
                </div>

                <div class="item tabs tabs-secondary tabs-icon-left">
                    <a class="tab-item" href="javascript:;">
                        <img class="light-border" bo-src="issue.shop_by_shop_id.shop_image" height="49px">
                    </a>
                    <a class="tab-item" href="javascript:;" ng-click="openShare(deal)">
                        <i class="icon ion-share"></i>
                    </a>
                    <a class="tab-item" href="javascript:;" ng-click="toCart(deal);">
                        <i ng-if="inCart(deal) == false" class="icon ion-ios7-cart"></i>
                        <i ng-if="inCart(deal) == true" class="icon ion-checkmark-round balanced"></i>
                    </a>
                </div>

            </div>

        </ion-item>

    </ion-list>
</div>